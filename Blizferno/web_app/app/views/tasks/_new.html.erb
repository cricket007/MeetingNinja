<script type="text/javascript">
	function validateForm()
	{
	var title = document.forms["input"]["title"].value;
	var description = document.forms["input"]["description"].value;
	var deadline = document.forms["input"]["deadline"].value;
	var completionCriteria = document.forms["input"]["completionCriteria"].value;
	var assignedTo = document.forms["input"]["assignedTo"].value;

	if(title.length == 0 || description.length == 0 || !checkDeadlineFormat(deadline) || completionCriteria.length == 0 || assignedTo.length == 0) {
		var string = "The following fields need filled or modified: \n\n";
		if(title.length == 0) string = string + "Title\n";
		if(description.length == 0) string = string + "Description\n";
		if(!checkDeadlineFormat(deadline)) string = string + "Deadline (format = 'MM/DD/YYYY_HH:MM', where the underscore is a space)\n";
		if(completionCriteria.length == 0) string = string + "Completion Criteria\n";
		if(assignedTo.length == 0) string = string + "Assigned To\n";
		alert(string);
		return false;
	}
	else{
		return true;
	}
}
	
	function checkDeadlineFormat(deadline)
	{
		if(deadline.length == 0) return false;
		else {
			var array = deadline.split('');
			var date = new Date()
			var month = parseInt(deadline.substring(0,2));
			var day = parseInt(deadline.substring(3,5));
			var year = parseInt(deadline.substring(6, 10));
			var hours = parseInt(deadline.substring(11, 13));
			var minutes = parseInt(deadline.substring(14, 16));
			if(!(!isNaN(array[0]) && !isNaN(array[1]) && !isNaN(array[3]) && !isNaN(array[4]) && !isNaN(array[6]) && !isNaN(array[7]) && !isNaN(array[8]) && !isNaN(array[9]) && !isNaN(array[11]) && !isNaN(array[12]) && !isNaN(array[14]) && !isNaN(array[15]))) return false;
			else if(array[2] != '/' || array[5] != '/' || array[10] != ' ' || array[13] != ':') return false;
			else if(day > 31 || day == 0 || month > 12 || month == 0 || year < date.getFullYear() || hours > 23 || minutes > 59) return false;
			else return true;
			
		}
	
	}
</script>
<span style="font-size:28px; color:#f00;"><strong><span style="font-size:18px;">All fields are required. </span></strong></span>
<form name="input" id="createTask" action ="http://csse371-04.csse.rose-hulman.edu/Task/" onsubmit="return validateForm()" method="post">
	<span style="font-size:28px;"><strong><span style="font-size:18px;">Topic: </span></strong></span>
	<br>
	<input type="text" name="title" maxlength="50" size="25">
	<br>
	<span style="font-size:28px;"><strong><span style="font-size:18px;">Description: </span></strong></span>
	<br>
	<input type="text" name="description" maxlength="1000" size="25">
	<br>
	<span style="font-size:28px;"><strong><span style="font-size:18px;">Deadline: (please use military time) </span></strong></span>
	<br>
	<input type="text" name="deadline" placeholder="mm/dd/yyyy HH:MM" maxLength="16" size="16">
	<br>
	<span style="font-size:28px;"><strong><span style="font-size:18px;">Completion Criteria: </span></strong></span>
	<br>
	<input type="text" name="completionCriteria" maxLength="500" size="25">
	<br>
	<span style="font-size:28px;"><strong><span style="font-size:18px;">Assigned to: </span></strong></span>
	<br>
	<input type="text" name="assignedTo" maxLength="20" size="10">
	<input type="hidden" name="isCompleted" value="false">
	<input type="hidden" name="dateCreated" value="<%= Time.now.strftime("%m/%d/%Y %H:%M") %>">
	<input type="hidden" name="createdBy" value="oharace"> <!-- Change this to current user -->
	<input type="hidden" name="assignedFrom" value="oharace"> <!-- Change this to current user -->
	<input type="hidden" name="dateAssigned" value="<%= Time.now.strftime("%m/%d/%Y %H:%M") %>"> <!-- Change this too -->
</form>
